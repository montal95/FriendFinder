<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <title>FriendFinder</title>
</head>

<body>
    <div class="container">
        <h2>Survey Questions</h2>
        <hr class="my-2">
        <h3><strong>About You</strong></h3>
        <form>
            <h4>Name (Required)</h4>
            <input type="text" class="form-control" id="userName" required>
            <h4>Link to Photo Image (Required)</h4>
            <input type="text" class="form-control" id="userPic" required>
            <hr class="my-4">
            <h3><strong>Question 1</strong></h3>
            <h4>Your ideal night involves going out to a bar</h4>
            <div class="form-group">
                <select class="form-control" id="q1">
                    <option value="none"></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <br>
            <h3><strong>Question 2</strong></h3>
            <h4>Camping is the greatest!</h4>
            <div class="form-group">
                <select class="form-control" id="q2">
                    <option value="none"></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <br>
            <h3><strong>Question 3</strong></h3>
            <h4>I love when my partner plays fantasy football</h4>
            <div class="form-group">
                <select class="form-control" id="q3">
                    <option value="none"></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <br>
            <h3><strong>Question 4</strong></h3>
            <h4>Video games are pretty cool</h4>
            <div class="form-group">
                <select class="form-control" id="q4">
                    <option value="none"></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <br>
            <h3><strong>Question 5</strong></h3>
            <h4>Comic cons are cool places to visit</h4>
            <div class="form-group">
                <select class="form-control" id="q5">
                    <option value="none"></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <br>
            <h3><strong>Question 6</strong></h3>
            <h4>I spend a lot of time at the library</h4>
            <div class="form-group">
                <select class="form-control" id="q6">
                    <option value="none"></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <br>
            <h3><strong>Question 7</strong></h3>
            <h4>Film festivals are the bomb</h4>
            <div class="form-group">
                <select class="form-control" id="q7">
                    <option value="none"></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <br>
            <h3><strong>Question 8</strong></h3>
            <h4>Concerts are my normal go-to for nights out</h4>
            <div class="form-group">
                <select class="form-control" id="q8">
                    <option value="none"></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <br>
            <h3><strong>Question 9</strong></h3>
            <h4>TV Dinners and Netflix are my ideal night</h4>
            <div class="form-group">
                <select class="form-control" id="q9">
                    <option value="none"></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <br>
            <h3><strong>Question 10</strong></h3>
            <h4>I always wanted to go to the World Cup</h4>
            <div class="form-group">
                <select class="form-control" id="q10">
                    <option value="none"></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
            <br>
            <!-- data toggle and data target works the modal-->
            <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit" data-toggle="modal" data-target="#resultModal">Submit</button>
        </form>
        <hr class="my-4">
        <a href="/api/users">API Friends List</a> | <a href="https://github.com/montal95/FriendFinder">GitHub Repo</a>
    </div>

    <div id="resultModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Friend Found!</h3>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <!-- Match friend and image here-->
                    <h2 id="friendName"></h2>
                    <img id="friendPic" src="#" style="width: 400px">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
</body>

</html>

<script type="text/javascript">
    //click action 
    $("#submit").on("click", function (event) {
        //prevents 
        event.preventDefault();

        //data validation
        var validEntry = true;
        if ($('#userName').val() === "" || $('#userPic').val() === "") {
            validEntry = false;
        } else if ($('#q1').val() === "none" || $('#q2').val() === "none" || $('#q3').val() === "none" || $('#q4').val() === "none" || $('#q5').val() === "none" || $('#q6').val() === "none" || $('#q7').val() === "none" || $('#q8').val() === "none" || $('#q9').val() === "none" || $('#q10').val() === "none") {
            validEntry = false;
        }

        if (validEntry) {
            //console.log("The form is complete. Validation works");
            var newUser = {
                name: $('#userName').val().trim(),
                photo: $('#userPic').val().trim(),
                scores: [
                    $('#q1').val().trim(),
                    $('#q2').val().trim(),
                    $('#q3').val().trim(),
                    $('#q4').val().trim(),
                    $('#q5').val().trim(),
                    $('#q6').val().trim(),
                    $('#q7').val().trim(),
                    $('#q8').val().trim(),
                    $('#q9').val().trim(),
                    $('#q10').val().trim()
                ]
            }
            //console.log(newUser);
            //posts new user information to the friendArray THEN returns match name and image
            $.post("/api/friends", newUser).then(function (data) {
                $('#friendName').text(data.friendName);
                $('#friendPic').attr('src', data.friendPic);
            })
        } else {
            //alerts user something is empty
            alert("Please complete all of the form");
        }
    })
</script>